#!/usr/bin/env sh

echo "ğŸ” Running pre-commit checks..."

# Architecture validation
echo "\nğŸ“ Validating architecture boundaries..."
node tools/scripts/validate-architecture.js
if [ $? -ne 0 ]; then
  echo "âŒ Architecture validation failed!"
  echo "   Please fix architecture violations before committing."
  exit 1
fi

# Linting (only for mobile app)
echo "\nğŸ“‹ Running linting on mobile app..."
npx nx lint mobile --quiet
if [ $? -ne 0 ]; then
  echo "âŒ Linting failed!"
  echo "   Run 'nx lint mobile' to see errors."
  echo "   Run 'nx lint mobile --fix' to auto-fix some issues."
  exit 1
fi

echo "\nâœ… All pre-commit checks passed!"
echo "   Proceeding with commit..."
